# UI增强功能测试指南

## 编译状态
✅ Desktop平台编译成功
✅ Android平台编译成功

## 测试清单

### 1. 播放列表名称编辑测试

#### 测试步骤
1. 启动应用
2. 点击右下角的"+"按钮
3. 在"M3U URL"标签页：
   - 输入自定义名称（例如："我的播放列表"）
   - 输入M3U URL
   - 点击"添加"
   - 验证播放列表显示自定义名称
4. 再次点击"+"按钮
5. 在"M3U URL"标签页：
   - 不输入名称（留空）
   - 输入M3U URL
   - 点击"添加"
   - 验证播放列表显示默认名称"M3U播放列表"
6. 切换到"Xtream"标签页：
   - 输入自定义名称
   - 输入服务器信息
   - 点击"添加"
   - 验证播放列表显示自定义名称
7. 再次测试Xtream但不输入名称
   - 验证播放列表显示服务器地址作为名称

#### 预期结果
- ✅ 名称字段显示在URL/服务器信息之前
- ✅ 输入的自定义名称正确显示
- ✅ 空名称时使用合理的默认值
- ✅ 支持中文输入

### 2. 添加播放列表加载提示测试

#### 测试步骤
1. 点击"+"按钮添加M3U播放列表
2. 输入有效的M3U URL
3. 点击"添加"按钮
4. 观察加载对话框：
   - 应显示"请稍候"标题
   - 应显示CircularProgressIndicator
   - 应显示"正在加载播放列表..."消息
5. 等待加载完成
   - 对话框应自动关闭
   - 播放列表应出现在列表中
6. 测试错误情况：
   - 输入无效的URL
   - 点击"添加"
   - 观察错误对话框显示

#### 预期结果
- ✅ 加载对话框立即显示
- ✅ 显示适当的加载消息
- ✅ 成功后自动关闭
- ✅ 失败时显示错误对话框
- ✅ 错误消息清晰易懂

### 3. 播放器加载状态提示测试

#### 测试步骤
1. 从播放列表中选择一个频道
2. 点击频道打开播放器
3. 观察加载过程：
   - 应显示半透明黑色覆盖层
   - 应显示白色CircularProgressIndicator
   - 应显示"正在加载..."文本
4. 等待视频开始播放
   - 加载覆盖层应消失
   - 视频应正常播放
5. 切换到另一个频道
   - 再次观察加载动画

#### 预期结果
- ✅ 加载覆盖层半透明（alpha = 0.5）
- ✅ 加载指示器居中显示
- ✅ 文本清晰可读（白色）
- ✅ 不完全遮挡视频区域
- ✅ 播放开始后自动消失

### 4. 手动刷新播放列表测试

#### 测试步骤
1. 在播放列表界面，找到M3U_URL类型的播放列表
2. 观察播放列表项：
   - 应显示刷新按钮（Refresh图标）
3. 点击刷新按钮
4. 观察加载对话框：
   - 应显示"正在刷新播放列表..."
5. 等待刷新完成
   - 对话框应关闭
   - 播放列表数据应更新
6. 测试Xtream播放列表：
   - 点击刷新按钮
   - 应显示"Xtream播放列表刷新功能暂不支持"错误
7. 测试本地M3U文件：
   - 不应显示刷新按钮

#### 预期结果
- ✅ M3U_URL播放列表显示刷新按钮
- ✅ Xtream播放列表显示刷新按钮
- ✅ 本地M3U文件不显示刷新按钮
- ✅ 刷新时显示加载指示器
- ✅ M3U_URL刷新成功
- ✅ Xtream刷新显示适当的错误消息

### 5. 全屏播放测试

#### 测试步骤
1. 打开任意频道进入播放器
2. 观察右上角的全屏按钮：
   - 应显示半透明按钮
   - 按钮文本为"全屏"
3. 点击全屏按钮
4. 验证全屏状态：
   - TopAppBar应消失
   - 视频应占满整个屏幕
   - 按钮文本变为"退出全屏"
5. Desktop平台：
   - 验证VLC全屏模式激活
6. 点击"退出全屏"按钮
7. 验证退出全屏：
   - TopAppBar应重新显示
   - 视频恢复正常大小
   - 按钮文本变回"全屏"

#### 预期结果
- ✅ 全屏按钮可见且可点击
- ✅ 按钮半透明不遮挡视频
- ✅ 全屏时TopAppBar隐藏
- ✅ 全屏时视频占满屏幕
- ✅ 可以正常退出全屏
- ✅ Desktop平台VLC全屏工作正常
- ✅ Android平台布局正确调整

## 集成测试

### 完整工作流测试
1. 启动应用
2. 添加一个自定义名称的M3U播放列表
   - 观察加载提示
3. 等待加载完成
4. 刷新该播放列表
   - 观察刷新加载提示
5. 打开一个频道
   - 观察播放器加载提示
6. 视频开始播放后，点击全屏
7. 在全屏模式下观看一段时间
8. 退出全屏
9. 返回播放列表

### 预期结果
- ✅ 所有功能流畅衔接
- ✅ 没有UI闪烁或卡顿
- ✅ 所有加载状态正确显示
- ✅ 全屏切换平滑

## 错误场景测试

### 网络错误
1. 断开网络连接
2. 尝试添加M3U播放列表
3. 验证错误消息清晰
4. 尝试刷新播放列表
5. 验证错误处理正确

### 无效输入
1. 输入无效的M3U URL
2. 验证错误提示
3. 输入无效的Xtream服务器地址
4. 验证错误提示

## 性能测试

### 加载性能
- 加载对话框应立即显示（< 100ms）
- 不应阻塞UI线程
- 动画应流畅（60fps）

### 内存使用
- 加载对话框不应导致内存泄漏
- 全屏切换不应增加内存使用

## 平台特定测试

### Desktop (macOS/Windows/Linux)
- ✅ VLC全屏API工作正常
- ✅ 窗口管理正确
- ✅ 键盘快捷键（如果有）工作正常

### Android
- ✅ 触摸交互流畅
- ✅ 屏幕旋转处理正确
- ✅ 系统返回键处理正确
- ✅ 应用切换时状态保持

## 已知问题

1. **Xtream刷新限制**
   - Xtream播放列表刷新暂不支持
   - 需要数据库schema更改
   - 显示适当的错误消息

2. **全屏图标**
   - 使用文本按钮代替图标
   - Material Icons的Fullscreen图标在某些版本中不可用
   - 文本按钮提供更好的可读性

## 测试报告模板

```
测试日期: ___________
测试平台: [ ] Desktop  [ ] Android
测试人员: ___________

功能测试结果:
[ ] 1. 播放列表名称编辑
[ ] 2. 添加播放列表加载提示
[ ] 3. 播放器加载状态提示
[ ] 4. 手动刷新播放列表
[ ] 5. 全屏播放支持

发现的问题:
1. ___________
2. ___________
3. ___________

总体评价:
[ ] 通过  [ ] 需要修复  [ ] 阻塞性问题

备注:
___________
```
